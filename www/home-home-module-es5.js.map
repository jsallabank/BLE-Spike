{"version":3,"sources":["./src/app/home/home.page.html","./src/app/home/home.module.ts","./src/app/home/home.page.scss","./src/app/home/home.page.ts"],"names":[],"mappings":"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","file":"home-home-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>\\n      BLE Spike\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"ion-padding\\\">\\n    <p>Current data being received: {{globalData}}</p>\\n    <ion-button (click)='writeIt()'>Write Data</ion-button>\\n    <ion-button (click)='scan()'>Scan</ion-button>\\n  </div>\\n  <ion-list>\\n    <ion-card-content ion-item *ngFor=\\\"let device of devices\\\">\\n      <p>{{device.name || 'Unnamed'}}</p>\\n      <p>{{device.id}}</p>\\n      <p> RSSI: {{device.rssi}}</p>\\n      <p><ion-button (click)='connect(device.id)'>Connect</ion-button></p>\\n    </ion-card-content>\\n  </ion-list>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: HomePage\n      }\n    ])\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MifQ== */\"","import { Component, NgZone} from '@angular/core';\nimport { BLE } from '@ionic-native/ble/ngx';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n  globalData;\n  currentBleId;\n  //for BLE peripheral sim\n  //Battery Characteristic: 00002A19-0000-1000-8000-00805f9b34fb\n  //Battery Service UUID: 0000180F-0000-1000-8000-00805f9b34fb\n  service_uuid = '180f';\n  characteristic_uuid = '2a19';\n  devices:any[] = [];\n  peripheral: any = {};\n  constructor(private ble:BLE,private ngZone: NgZone) \n  {\n    \n  }\n  scan(){\n    this.devices = [];\n    this.ble.scan([],10).subscribe(\n      device => this.onDeviceDiscovered(device)\n    );\n  }\n  onDeviceDiscovered(device){\n    console.log('Discovered' + JSON.stringify(device,null,2));\n    this.ngZone.run(()=>{\n      this.devices.push(device)\n      console.log(device)\n    })\n  }\n  \nconnect(id){\n  this.ble.connect(id).subscribe(\n    peripheral => this.onConnected(peripheral),\n    peripheral => this.onDisconnect()\n  );   \n}\n//sudo ionic cordova run android --device\n//phone passwords 2323\n//https://github.com/don/ionic-ble-examples/blob/d0acd2b47ea08011be4d1aa844c4f74426a22273/thermometer/src/pages/detail/detail.ts#L37-L55\nonConnected(peripheral){\n  this.peripheral = peripheral;\n    alert('Connected to ' + (peripheral.name || peripheral.id));\n    this.currentBleId = peripheral.id;\n    // Subscribe for notifications when the temperature changes\n    this.ble.startNotification(this.peripheral.id, this.service_uuid, this.characteristic_uuid).subscribe(\n      data => this.onChange(data),\n      () => alert('Unexpected Error, '+ 'Failed to subscribe for data changes')\n    )\n\n    // Read the current value of the temperature characteristic\n    this.ble.read(this.peripheral.id, this.service_uuid, this.characteristic_uuid).then(\n      data => this.onChange(data),\n      () => alert('Unexpected Error, '+ 'Failed to get dat')\n    )\n\n}    \nonChange(buffer:ArrayBuffer){\n\n// Data is a 4 byte floating point value\n\nvar data = new Uint8Array(buffer);\n//this.globalData = data;\n//alert(\"data received: \" + this.globalData);\nthis.ngZone.run(() => {\n  this.globalData = data[0];\n  alert(\"data received: \" + this.globalData);\n});\n}\nonDisconnect(){\n  alert('Disconnected');\n}\nwriteIt(){\n  var data = new Uint8Array(1);\n  data[0] = 1;\n  this.ble.write(this.currentBleId, this.service_uuid, this.characteristic_uuid, data.buffer)\n}\n\n\n}\n"],"sourceRoot":""}